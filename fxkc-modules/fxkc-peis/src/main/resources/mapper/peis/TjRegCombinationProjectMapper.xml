<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.fxkc.peis.mapper.TjRegCombinationProjectMapper">

    <select id="selectPage" resultType="org.fxkc.peis.domain.vo.TjRegCombinationProjectListVo">
        SELECT
            t1.ID,
            t1.COMBINATION_PROJECT_ID,
            t2.COMBIN_PROJECT_CODE,
            t2.COMBIN_PROJECT_NAME,
            t3.KS_NAME sectionName,
            t1.PROJECT_TYPE,
            t1.PROJECT_REQUIRED_TYPE,
            t1.DELAY_TIME,
            t1.DELAY_REASON
        FROM
            TJ_REG_COMBINATION_PROJECT t1
                LEFT JOIN TJ_COMBINATION_PROJECT t2 ON t1.COMBINATION_PROJECT_ID = t2.ID
                LEFT JOIN TJ_TJKS t3 ON t2.KS_ID = t3.ID
        where t1.DEL_FLAG ='0' and t2.DEL_FLAG ='0'
          and t1.CHECK_STATUS = #{bo.checkStatus}
          and t1.REGISTER_ID = #{bo.registerId}
    </select>

    <select id="queryGuideItemByIds" resultType="org.fxkc.peis.domain.vo.ftlModel.GuideSheetItemVo">
        SELECT
            pi.REGISTER_ID as regId,
            cp.GUIDE_ITEM_TYPE as checkType,
            cp.COMBIN_PROJECT_NAME as itemName,
            cp.GUIDE_NOTICE as hint,
            cp.CHECK_ADDRESS as deptAddress
        FROM
            TJ_REG_COMBINATION_PROJECT pi
                INNER JOIN TJ_COMBINATION_PROJECT cp ON pi.COMBINATION_PROJECT_ID = cp.id
        WHERE  cp.GUIDE_FLAG ='0' and pi.CHECK_STATUS!='2'
          and pi.REGISTER_ID in
        <foreach collection="regIdList" item="regId" open="(" separator="," close=")">
            #{regId}
        </foreach>
        ORDER BY cp.PROJECT_SORT
    </select>
</mapper>
